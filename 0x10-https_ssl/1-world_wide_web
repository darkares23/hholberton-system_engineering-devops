#!/usr/bin/env bash
# Information about the domain
domain_info() {
    subDomain=$1
    domain=$2
    record=$(dig $subDomain.$domain | awk "/ANSWER SECTION/{getline; print}" | awk "{print $4}")
    ip=$(dig $subDomain.$domain | awk "/ANSWER SECTION/{getline; print}" | awk "{print $5}")
    echo "The subdomain $subDomain is a $record record and points to $ip"
    }

domain=$1
subDomain=$2
# Entry point
# if only variable $1 (DOMAIN name)
if [ -z "$subDomain" ]
then
    # print info for all submodules
    domain_info "www" "$domain"
    domain_info "lb-01" "$domain"
    domain_info "web-01" "$domain"
    domain_info "web-02" "$domain"
else
    # print info for subdomain in $SUBDOMAIN
    domain_info "$subDomain" "$domain"
fi